(function(a){a.qjax=function(h){var d=a.extend({timeout:null,onError:null,onStart:null,onStop:null,onTimeout:null,onQueueChange:null,ajaxSettings:{url:"",timeout:5000,contentType:"application/json; charset=utf-8",dataType:"json",type:"POST"}},h),f=[],g=null,e=null,c=a(document),i=this,b=function(){if(d.onQueueChange){d.onQueueChange.call(i,f.length)}};this.clear=function(){if(g){g.abort();g=null}f=[]};this.Queue=function(l,k){var j=a.extend({},d.ajaxSettings,l||{}),m=j.complete;j.complete=function(p,n){var o=f.shift();if(o.complete){o.complete.call(o.thisArg||this,p,n)}b();g=null;if(f.length>=1&&!g){g=a.ajax(f[0].options)}};f.push({options:j,complete:m,thisArg:k});b();if(f.length==1&&!g){g=a.ajax(f[0].options)}};if(d.onError){c.ajaxError(d.onError)}if(d.onStart||d.timeout){c.ajaxStart(function(){if(d.onStart){d.onStart.call(i)}if(d.onTimeout&&d.timeout&&f.length>=1){if(e){clearTimeout(e)}e=setTimeout(d.onTimeout,d.timeout)}})}if(d.onStop){c.ajaxStop(function(){d.onStop.call(i)})}return this}})(jQuery);