(function(t){t.qjax=function(n){var o=t.extend({timeout:null,onStart:null,onStop:null,onError:null,onTimeout:null,onQueueChange:null,ajaxSettings:{url:"",timeout:5e3,contentType:"application/json; charset=utf-8",dataType:"json",type:"POST"}},n),e=[],i=null,u=null,l=this,s=!1,a=function(){s||(s=!0,o.onTimeout&&o.timeout&&t.isFunction(o.onTimeout)&&(u&&clearTimeout(u),u=setTimeout(t.proxy(function(){o.onTimeout.call(this,i.options)},this),o.timeout)),o.onStart&&t.isFunction(o.onStart)&&o.onStart(this,i.options))},r=function(){s&&0>=e.length&&(s=!1,u&&clearTimeout(u),o.onStop&&t.isFunction(o.onStop)&&o.onStop(this,i.options))},c=function(){o.onQueueChange&&o.onQueueChange.call(l,e.length),e.length>=1&&!i&&(i=e.shift(),i.options.isCallback?i.options.complete():(a(),t.ajax(i.options)))};return this.Clear=function(){e=[]},this.Queue=function(n,u){var l={},s=null;n instanceof Function?(l={isCallback:!0},s=n):(l=t.extend({},o.ajaxSettings,n||{}),s=l.complete),l.complete=function(n,e){"error"==e&&o.onError&&t.isFunction(o.onError)&&o.onError.call(i.thisArg||this,n,e),i&&(i.complete&&i.complete.call(i.thisArg||this,n,e),r(),i=null,c())},e.push({options:l,complete:s,thisArg:u}),c()},this}})(jQuery);